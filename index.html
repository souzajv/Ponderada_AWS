<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Usuários</title>
    <script>
        async function criarUsuario() {
            const nome = document.getElementById("nome").value;
            const idade = document.getElementById("idade").value;
            const email = document.getElementById("email").value;

            const response = await fetch('http://localhost:3000/usuarios', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ nome, idade, email })
            });

            const data = await response.json();
            console.log(data);
            alert('Usuário criado com sucesso!');
            listarUsuarios();
        }

        async function listarUsuarios() {
            const response = await fetch('http://localhost:3000/usuarios');
            const usuarios = await response.json();
            const listaUsuarios = document.getElementById("lista-usuarios");
            listaUsuarios.innerHTML = '';

            usuarios.forEach(usuario => {
                listaUsuarios.innerHTML += `<li>${usuario.nome} - ${usuario.idade} anos - ${usuario.email}</li>`;
            });
        }

        window.onload = listarUsuarios;
    </script>
</head>

<body>
    <h1>Cadastro de Usuários</h1>

    <h3>Criar Usuário</h3>
    <label for="nome">Nome:</label>
    <input type="text" id="nome" required><br><br>

    <label for="idade">Idade:</label>
    <input type="number" id="idade" required><br><br>

    <label for="email">Email:</label>
    <input type="email" id="email" required><br><br>

    <button onclick="criarUsuario()">Criar Usuário</button>

    <h3>Lista de Usuários</h3>
    <ul id="lista-usuarios"></ul>

    
</body>

</html>